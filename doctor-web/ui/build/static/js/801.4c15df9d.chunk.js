"use strict";(self.webpackChunkdoctor_appointment_booking=self.webpackChunkdoctor_appointment_booking||[]).push([[801],{1801:(e,t,l)=>{l.r(t),l.d(t,{default:()=>w});var n=l(5043),i=(l(8421),l(8628)),a=l(4282),o=l(6522),s=l(1072),d=l(8602),c=l(7994),r=l(3688),v=l(1467),u=l(3401),m=l(3204),h=l(7390),p=l(1685),x=l(6867),g=l(7044),y=l(1089),j=l(579);const b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],S={start_time:"09:00",start:{value:"09:00",label:"09:00 AM"},end_time:"09:00",end:{value:"17:00",label:"05:00 PM"}},A=(0,y.pP)("start"),f=(0,y.pP)("end"),w=()=>{const{data:e,isLoading:t,isError:l}=(0,h.eI)({}),[w,N]=(0,h.Ce)(),[C,_]=(0,n.useState)(b.reduce(((e,t)=>(e[t.toLocaleLowerCase()]={day:t,enabled:!1,timeSlots:[{day:t.toLocaleLowerCase(),...S}]},e)),{}));(0,n.useEffect)((()=>{if(e&&!l){const t=(0,y.Qj)(e);_({...C,...t})}}),[e,C,l]);const k=(e,t,l,n)=>{var i,a,o,s;const d={...C},c=JSON.parse(n);d[e].timeSlots[t][l]=c,d[e].timeSlots[t][l+"_time"]=c.value;const r=null===(i=d[e].timeSlots[t].start_time)||void 0===i?void 0:i.split(":");let v="end"===l&&"0:00"===c.value?"24:00":c.value;v=null===(a=v)||void 0===a?void 0:a.split(":");const u=new Date(0,0,0,null===(o=v)||void 0===o?void 0:o[0],+(null===(s=v)||void 0===s?void 0:s[1]))-new Date(0,0,0,null===r||void 0===r?void 0:r[0],null===r||void 0===r?void 0:r[1]);"end"===l&&u<0?(0,g.FH)({title:"Invalid date slot. Please select correct time",message:"You can't select end time smaller then stat time and cross the day.",options:{type:"danger"}}):_(d)};return(0,j.jsx)("div",{id:"availability",children:(0,j.jsxs)("div",{className:"container mt-4 d-flex justify-content-center align-items-center",children:[(0,j.jsx)(p.A,{loading:t}),(0,j.jsx)(u.N9,{}),(0,j.jsxs)(i.A,{className:"shadow-lg p-4",style:{width:"100%",maxWidth:"800px"},children:[(0,j.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,j.jsx)("h1",{className:"text-center mb-0",children:"Set Your Availability"}),(0,j.jsx)(a.A,{variant:"primary",onClick:()=>{const e=[],t={...C};for(const l in t){const n=t[l];null!==n&&void 0!==n&&n.enabled&&e.push(...n.timeSlots)}w(e)},disabled:null===N||void 0===N?void 0:N.isLoading,children:(0,j.jsx)(x.A,{loading:null===N||void 0===N?void 0:N.isLoading,children:"Save"})})]}),(0,j.jsx)(o.A,{children:Object.keys(C).map(((e,t)=>{const l=C[e];return(0,j.jsxs)(s.A,{className:"day-container mb-3 align-items-center",children:[(0,j.jsx)(d.A,{xs:3,className:"d-flex align-items-center",children:(0,j.jsx)(o.A.Check,{type:"switch",id:"switch-".concat(l.day),label:l.day,checked:l.enabled,onChange:()=>(e=>{console.log(e);const t={...C};t[e].enabled=!t[e].enabled,_(t)})(e),className:"day-switch custom-switch",style:{textTransform:"capitalize"}})}),(0,j.jsx)(d.A,{xs:9,children:l.enabled&&(0,j.jsxs)("div",{className:"time-slots-container",children:[l.timeSlots.map(((l,n)=>{var i,o;return(0,j.jsxs)(c.A,{className:"mb-2 align-items-center",children:[(0,j.jsx)(r.A,{as:c.A.Prepend,variant:"outline-secondary",title:null===(i=l.start)||void 0===i?void 0:i.label,id:"dropdown-start-".concat(t,"-").concat(n),className:"time-dropdown",onSelect:t=>k(e,n,"start",t),children:(0,j.jsx)("div",{className:"dropdown-scrollable",children:A.map(((e,t)=>(0,j.jsx)(v.A.Item,{eventKey:JSON.stringify(e),children:null===e||void 0===e?void 0:e.label},t)))})}),(0,j.jsx)(c.A.Text,{children:" - "}),(0,j.jsx)(r.A,{as:c.A.Append,variant:"outline-secondary",title:null===(o=l.end)||void 0===o?void 0:o.label,id:"dropdown-end-".concat(t,"-").concat(n),className:"time-dropdown",onSelect:t=>k(e,n,"end",t),children:(0,j.jsx)("div",{className:"dropdown-scrollable",children:f.map(((e,t)=>(0,j.jsx)(v.A.Item,{eventKey:JSON.stringify(e),children:null===e||void 0===e?void 0:e.label},t)))})}),(0,j.jsx)(a.A,{variant:"outline-secondary",onClick:()=>((e,t)=>{const l={...C},n={...l[e].timeSlots[t]};l[e].timeSlots.splice(t+1,0,n),_(l)})(e,n),className:"ml-2",children:(0,j.jsx)(m.LF8,{})}),(0,j.jsx)(a.A,{variant:"outline-danger",onClick:()=>((e,t)=>{var l;const n={...C};n[e].timeSlots.splice(t,1),(null===(l=n[e].timeSlots)||void 0===l?void 0:l.length)<=0&&(n[e].enabled=!1),_(n)})(e,n),className:"ml-2",children:(0,j.jsx)(m.qbC,{})})]},n)})),(0,j.jsxs)(a.A,{variant:"outline-primary",onClick:()=>(e=>{const t={...C};t[e].timeSlots.push({...S,day:e}),_(t)})(e),children:[(0,j.jsx)(m.OiG,{})," Add Time Slot"]})]})})]},l.day)}))})]})]})})}},6867:(e,t,l)=>{l.d(t,{A:()=>a});var n=l(4201),i=l(579);function a(e){return null!==e&&void 0!==e&&e.children?(0,i.jsxs)("div",{className:"d-flex flex-col justify-content-center align-items-center gap-1",children:[(0,i.jsx)(n.A,{height:25,color:"#18A0FB",...e}),(0,i.jsx)("strong",{children:null===e||void 0===e?void 0:e.children})]}):(0,i.jsx)(n.A,{height:25,color:"#18A0FB",...e})}},1089:(e,t,l)=>{l.d(t,{I4:()=>i,Qj:()=>o,fU:()=>n,pP:()=>a});const n=e=>{if(!e)return"00:00";let[t,l]=null===e||void 0===e?void 0:e.split(":");const n=t<12?"AM":"PM";return t=t%12||12,"".concat(t.toString().padStart(2,"0"),":").concat(l.toString().padStart(2,"0")," ").concat(n)},i=e=>{const t=new Date,l=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()));return(e=new Date(e)).toISOString()<l.toISOString()},a=e=>{const t=[],l=new Date(0,0,0,0,"start"===e?0:30,0),n=new Date(0,0,0,"start"===e?23:24,"start"===e?30:0,0);for(;l<=n;){const e=l.getHours()%12||12,n=l.getMinutes().toString().padStart(2,"0"),i=l.getHours()<12?"AM":"PM";t.push({value:"".concat(l.getHours(),":").concat(n),label:"".concat(e.toString().padStart(2,0),":").concat(n," ").concat(i)}),l.setMinutes(l.getMinutes()+30)}return t},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[];for(const a of e){var l,i;if(t[null===a||void 0===a||null===(l=a.day)||void 0===l?void 0:l.toLocaleLowerCase()])t[null===a||void 0===a?void 0:a.day].timeSlots.push({...a,start:{value:null===a||void 0===a?void 0:a.start_time,label:n(null===a||void 0===a?void 0:a.start_time)},end:{value:null===a||void 0===a?void 0:a.end_time,label:n(null===a||void 0===a?void 0:a.end_time)}});else t[null===a||void 0===a||null===(i=a.day)||void 0===i?void 0:i.toLocaleLowerCase()]={enabled:!0,day:null===a||void 0===a?void 0:a.day,timeSlots:[{...a,start:{value:null===a||void 0===a?void 0:a.start_time,label:n(null===a||void 0===a?void 0:a.start_time)},end:{value:null===a||void 0===a?void 0:a.end_time,label:n(null===a||void 0===a?void 0:a.end_time)}}]}}return t}}}]);
//# sourceMappingURL=801.4c15df9d.chunk.js.map