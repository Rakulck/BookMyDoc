"use strict";(self.webpackChunkdoctor_appointment_booking=self.webpackChunkdoctor_appointment_booking||[]).push([[801],{1801:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var l=n(5043),i=(n(8421),n(8628)),s=n(4282),a=n(6522),o=n(1072),d=n(8602),r=n(7994),c=n(3688),v=n(1467),m=n(3401),u=n(3204),h=n(4749),p=n(1685),x=n(6867),g=n(7044),j=n(1089),y=n(579);const b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],S={start_time:"09:00",start:{value:"09:00",label:"09:00 AM"},end_time:"17:00",end:{value:"17:00",label:"05:00 PM"}},A=(0,j.pP)("start"),w=(0,j.pP)("end"),f=()=>{const{data:e,isLoading:t,isError:n}=(0,h.eI)({}),[f,N]=(0,h.Ce)(),[C,_]=(0,l.useState)((()=>b.reduce(((e,t)=>(e[t.toLowerCase()]={day:t,enabled:!1,timeSlots:[{day:t.toLowerCase(),...S}]},e)),{})));(0,l.useEffect)((()=>{if(e&&!n){const t=(0,j.Qj)(e);_((e=>({...e,...t})))}}),[e,n]);const k=(e,t,n,l)=>{const i=JSON.parse(l);_((l=>{var s,a,o,d;const r={...l};r[e].timeSlots[t][n]=i,r[e].timeSlots[t][n+"_time"]=i.value;const c=null===(s=r[e].timeSlots[t].start_time)||void 0===s?void 0:s.split(":");let v="end"===n&&"0:00"===i.value?"24:00":i.value;v=null===(a=v)||void 0===a?void 0:a.split(":");const m=new Date(0,0,0,null===(o=v)||void 0===o?void 0:o[0],+(null===(d=v)||void 0===d?void 0:d[1]))-new Date(0,0,0,null===c||void 0===c?void 0:c[0],null===c||void 0===c?void 0:c[1]);return"end"===n&&m<0?((0,g.FH)({title:"Invalid time slot. Please select correct time",message:"You can't select end time smaller than start time and cross the day.",options:{type:"danger"}}),l):r}))};return(0,y.jsx)("div",{id:"availability",children:(0,y.jsxs)("div",{className:"container mt-3 d-flex justify-content-center align-items-center",children:[(0,y.jsx)(p.A,{loading:t}),(0,y.jsx)(m.N9,{}),(0,y.jsxs)(i.A,{className:"shadow-sm p-3",style:{width:"100%",maxWidth:"700px"},children:[(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,y.jsx)("h1",{className:"text-center mb-0",children:"Schedule"}),(0,y.jsx)(s.A,{variant:"primary",onClick:()=>{const e=[],t={...C};for(const n in t){const l=t[n];null!==l&&void 0!==l&&l.enabled&&e.push(...l.timeSlots)}f(e)},disabled:null===N||void 0===N?void 0:N.isLoading,children:(0,y.jsx)(x.A,{loading:null===N||void 0===N?void 0:N.isLoading,children:"Save"})})]}),(0,y.jsx)(a.A,{children:Object.keys(C).map(((e,t)=>{const n=C[e];return(0,y.jsxs)(o.A,{className:"day-container mb-2 align-items-center",children:[(0,y.jsx)(d.A,{xs:12,sm:3,className:"d-flex align-items-center mb-2 mb-sm-0",children:(0,y.jsx)(a.A.Check,{type:"switch",id:"switch-".concat(n.day),label:n.day,checked:n.enabled,onChange:()=>(e=>{_((t=>({...t,[e]:{...t[e],enabled:!t[e].enabled}})))})(e),className:"day-switch custom-switch",style:{textTransform:"capitalize"}})}),(0,y.jsx)(d.A,{xs:12,sm:9,children:n.enabled&&(0,y.jsxs)("div",{className:"time-slots-container",children:[n.timeSlots.map(((n,l)=>{var i,a;return(0,y.jsxs)(r.A,{className:"mb-2 align-items-center",size:"sm",children:[(0,y.jsx)(c.A,{as:r.A.Prepend,variant:"outline-secondary",title:null===(i=n.start)||void 0===i?void 0:i.label,id:"dropdown-start-".concat(t,"-").concat(l),className:"time-dropdown",size:"sm",onSelect:t=>k(e,l,"start",t),children:(0,y.jsx)("div",{className:"dropdown-scrollable",children:A.map(((e,t)=>(0,y.jsx)(v.A.Item,{eventKey:JSON.stringify(e),children:null===e||void 0===e?void 0:e.label},t)))})}),(0,y.jsx)(r.A.Text,{children:"-"}),(0,y.jsx)(c.A,{as:r.A.Append,variant:"outline-secondary",title:null===(a=n.end)||void 0===a?void 0:a.label,id:"dropdown-end-".concat(t,"-").concat(l),className:"time-dropdown",size:"sm",onSelect:t=>k(e,l,"end",t),children:(0,y.jsx)("div",{className:"dropdown-scrollable",children:w.map(((e,t)=>(0,y.jsx)(v.A.Item,{eventKey:JSON.stringify(e),children:null===e||void 0===e?void 0:e.label},t)))})}),(0,y.jsx)(s.A,{variant:"outline-secondary",onClick:()=>((e,t)=>{_((n=>{const l={...n},i={...l[e].timeSlots[t]};return l[e].timeSlots.splice(t+1,0,i),l}))})(e,l),size:"sm",className:"ms-1",children:(0,y.jsx)(u.LF8,{})}),(0,y.jsx)(s.A,{variant:"outline-danger",onClick:()=>((e,t)=>{_((n=>{var l;const i={...n};return i[e].timeSlots.splice(t,1),(null===(l=i[e].timeSlots)||void 0===l?void 0:l.length)<=0&&(i[e].enabled=!1),i}))})(e,l),size:"sm",className:"ms-1",children:(0,y.jsx)(u.qbC,{})})]},l)})),(0,y.jsxs)(s.A,{variant:"outline-primary",onClick:()=>(e=>{_((t=>({...t,[e]:{...t[e],timeSlots:[...t[e].timeSlots,{...S,day:e}]}})))})(e),size:"sm",children:[(0,y.jsx)(u.OiG,{className:"me-1"})," Add Slot"]})]})})]},n.day)}))})]})]})})}},6867:(e,t,n)=>{n.d(t,{A:()=>s});var l=n(4201),i=n(579);function s(e){return null!==e&&void 0!==e&&e.children?(0,i.jsxs)("div",{className:"d-flex flex-col justify-content-center align-items-center gap-1",children:[(0,i.jsx)(l.A,{height:25,color:"#18A0FB",...e}),(0,i.jsx)("strong",{children:null===e||void 0===e?void 0:e.children})]}):(0,i.jsx)(l.A,{height:25,color:"#18A0FB",...e})}},1089:(e,t,n)=>{n.d(t,{I4:()=>i,Qj:()=>a,fU:()=>l,pP:()=>s});const l=e=>{if(!e)return"00:00";let[t,n]=null===e||void 0===e?void 0:e.split(":");const l=t<12?"AM":"PM";return t=t%12||12,"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0")," ").concat(l)},i=e=>{const t=new Date,n=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()));return(e=new Date(e)).toISOString()<n.toISOString()},s=e=>{const t=[],n=new Date(0,0,0,0,"start"===e?0:30,0),l=new Date(0,0,0,"start"===e?23:24,"start"===e?30:0,0);for(;n<=l;){const e=n.getHours()%12||12,l=n.getMinutes().toString().padStart(2,"0"),i=n.getHours()<12?"AM":"PM";t.push({value:"".concat(n.getHours(),":").concat(l),label:"".concat(e.toString().padStart(2,"0"),":").concat(l," ").concat(i)}),n.setMinutes(n.getMinutes()+30)}return t},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[];for(const a of e){var n,i,s;if(t[null===a||void 0===a||null===(n=a.day)||void 0===n?void 0:n.toLowerCase()])t[null===a||void 0===a||null===(i=a.day)||void 0===i?void 0:i.toLowerCase()].timeSlots.push({...a,start:{value:null===a||void 0===a?void 0:a.start_time,label:l(null===a||void 0===a?void 0:a.start_time)},end:{value:null===a||void 0===a?void 0:a.end_time,label:l(null===a||void 0===a?void 0:a.end_time)}});else t[null===a||void 0===a||null===(s=a.day)||void 0===s?void 0:s.toLowerCase()]={enabled:!0,day:null===a||void 0===a?void 0:a.day,timeSlots:[{...a,start:{value:null===a||void 0===a?void 0:a.start_time,label:l(null===a||void 0===a?void 0:a.start_time)},end:{value:null===a||void 0===a?void 0:a.end_time,label:l(null===a||void 0===a?void 0:a.end_time)}}]}}return t}}}]);
//# sourceMappingURL=801.f46ea9dd.chunk.js.map