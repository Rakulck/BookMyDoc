"use strict";(self.webpackChunkdoctor_appointment_booking=self.webpackChunkdoctor_appointment_booking||[]).push([[299],{299:(e,i,n)=>{n.r(i),n.d(i,{default:()=>L});var l=n(5043),o=n(3519),d=n(4816),t=n(1428),s=n(8628),a=n(3401),c=n(9379),r=n(4282),v=n(1072),u=n(8602),m=n(4063),h=n(633),g=n(2819),x=n(6867),A=n(579);const j=function(e){let{open:i,type:n,title:o,body:d,loading:t=!1,disable:s=!1,confirmButton:a,onConfirm:c,closeButton:v,onClose:u,children:m}=e;const[h,j]=(0,l.useState)(i),p=()=>{u&&u(!1)};return(0,l.useEffect)(()=>{j(i)},[i]),(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(g.A,{show:h,onHide:p,backdrop:"static",keyboard:!1,children:[(0,A.jsx)(g.A.Header,{closeButton:!0,children:(0,A.jsx)(g.A.Title,{children:o})}),(0,A.jsx)(g.A.Body,{children:d||m}),(0,A.jsxs)(g.A.Footer,{children:[(0,A.jsx)(r.A,{variant:"secondary",onClick:p,children:null!==v&&void 0!==v?v:"Close"}),(0,A.jsx)(r.A,{variant:n||"primary",disabled:s,onClick:()=>{j(!1),c&&c(!1)},children:(0,A.jsx)(x.A,{loading:t,children:a})})]})]})})};var p=n(454),b=n(4749),k=n(1089),y=n(2327),f=n(6522),C=n(1719);const N=e=>{let{slot:i}=e;return(0,A.jsxs)(y.A,{direction:"horizontal",gap:2,children:[(0,A.jsx)(m.A,{bg:"secondary",children:(0,k.fU)(null===i||void 0===i?void 0:i.start_time)}),(0,A.jsx)("span",{children:" - "}),(0,A.jsx)(m.A,{bg:"secondary",children:(0,k.fU)(null===i||void 0===i?void 0:i.end_time)})]})},_=e=>{var i,n;let{booking:o}=e;const[d,t]=(0,l.useState)(!0),[s,a]=(0,l.useState)({valid:!0}),[m,h]=(0,l.useState)({booking_id:null===o||void 0===o?void 0:o.booking_id,date:null===o||void 0===o?void 0:o.date,slot_id:null===o||void 0===o||null===(i=o.slot)||void 0===i?void 0:i.slot_id}),{data:j,isLoading:k,isFetching:y}=(0,b.eI)({date:null===m||void 0===m?void 0:m.date}),[_,w]=(0,b.JB)();(0,l.useEffect)(()=>{if(Array.isArray(j)&&null!==j&&void 0!==j&&j.length){const e=j.find(e=>{var i;return(null===e||void 0===e?void 0:e.slot_id)===(null===o||void 0===o||null===(i=o.slot)||void 0===i?void 0:i.slot_id)});h((0,c.A)((0,c.A)({},m),{},{slot_id:null===e||void 0===e?void 0:e.slot_id}))}else h((0,c.A)((0,c.A)({},m),{},{slot_id:null}))},[j,null===o||void 0===o||null===(n=o.slot)||void 0===n?void 0:n.slot_id,m]);const B=(e,i)=>{var n;let l=(0,c.A)({},m);l=null!==i&&void 0!==i&&null!==(n=i.target)&&void 0!==n&&n.value?(0,c.A)((0,c.A)({},m),{},{[e]:i.target.value}):e&&i?(0,c.A)((0,c.A)({},m),{[e]:i}):(0,c.A)((0,c.A)({},m),e),h(l),S(l)},S=e=>{let i=Object.assign({},((0,p.A)(e),e)),n=!0;if(a({valid:n}),null!==i&&void 0!==i&&i.date){const e=new Date;new Date(null===i||void 0===i?void 0:i.date)>=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0)||(n=!1,a((0,c.A)((0,c.A)({},s),{},{valid:n,date:"Please select valid date"})))}else n=!1,a((0,c.A)((0,c.A)({},s),{},{valid:n,date:"Please select booking date"}));return null===j||void 0===j||!j.length||null!==i&&void 0!==i&&i.slot_id||(n=!1,a((0,c.A)((0,c.A)({},s),{},{valid:n,slot:"Please select booking slot"}))),n};return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(g.A,{show:d,onHide:()=>t(!1),backdrop:"static",keyboard:!1,children:[(0,A.jsx)(g.A.Header,{closeButton:!0,children:(0,A.jsx)(g.A.Title,{children:"Reschedule Booking"})}),(0,A.jsx)(g.A.Body,{children:(0,A.jsxs)(f.A,{noValidate:!0,validated:s.valid,children:[(0,A.jsx)(f.A.Control,{type:"date",value:null===m||void 0===m?void 0:m.date,onChange:e=>B("date",e),isInvalid:!(null===s||void 0===s||!s.date)}),(null===s||void 0===s?void 0:s.date)&&(0,A.jsx)(f.A.Control.Feedback,{type:"invalid",children:s.date}),k||y?(0,A.jsx)(x.A,{loading:k||y,children:" "}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(v.A,{className:"mt-3",children:(0,A.jsx)(u.A,{xs:12,children:(0,A.jsx)(f.A.Label,{className:"text-capitalize",children:null!==j&&void 0!==j&&j.length?null===j||void 0===j?void 0:j[0].day:(0,A.jsx)(C.A,{variant:"warning",children:"No availability slot found. Set slot from Availability option."},"warning")})})}),(j||[]).map(e=>(0,A.jsx)(v.A,{children:(0,A.jsx)(u.A,{xs:12,children:(0,A.jsx)(f.A.Check,{disabled:!1,checked:(null===m||void 0===m?void 0:m.slot_id)===(null===e||void 0===e?void 0:e.slot_id),type:"radio",onChange:()=>B("slot_id",null===e||void 0===e?void 0:e.slot_id),label:(0,A.jsx)(N,{slot:e}),id:null===e||void 0===e?void 0:e.slot_id,isInvalid:!0})})})),(null===s||void 0===s?void 0:s.slot)&&(0,A.jsx)("span",{className:"text-danger",style:{fontSize:".87rem"},children:s.slot})]})]})}),(0,A.jsxs)(g.A.Footer,{children:[(0,A.jsx)(r.A,{variant:"secondary",onClick:()=>t(!1),children:"Close"}),(0,A.jsx)(r.A,{variant:"primary",disabled:k||y||(null===w||void 0===w?void 0:w.isLoading)||!(null!==m&&void 0!==m&&m.slot_id),onClick:async()=>{if(S(m)){const e=m.booking_id;delete m.booking_id,await _({id:e,data:m}),t(!1)}},children:(0,A.jsx)(x.A,{loading:null===w||void 0===w?void 0:w.isLoading,children:"Reschedule"})})]})]})})},w=e=>{var i,n,o,d,t,a;let{booking:g}=e;const[p,y]=(0,b.JB)(),[f,C]=(0,l.useState)({title:"",open:!1,action:""}),N=e=>{const i={id:null===g||void 0===g?void 0:g.booking_id,data:{status:e}};p(i),C(e=>(0,c.A)((0,c.A)({},e),{},{open:!1}))},w=()=>{let e=null;switch(null===g||void 0===g?void 0:g.status){case"pending":e=(0,k.I4)(null===g||void 0===g?void 0:g.date)?(0,A.jsx)(r.A,{variant:"primary",className:"ms-2",size:"sm",onClick:()=>C({open:!0,title:"Reschedule Booking",children:"Are you sure want to reschedule this booking?",confirmButton:"Yes, Reschedule",onConfirm:()=>C({open:!1,action:"reschedule"})}),children:(0,A.jsx)(x.A,{loading:(null===y||void 0===y?void 0:y.isLoading)&&"reschedule"===(null===C||void 0===C?void 0:C.action),children:"Reschedule"})}):(0,A.jsx)(r.A,{variant:"primary",className:"ms-2",size:"sm",onClick:()=>C({open:!0,title:"Confirm Booking",body:"Are you sure want to confirm this booking?",confirmButton:"Yes, Confirm",onConfirm:()=>N("confirmed"),action:"confirmed"}),children:(0,A.jsx)(x.A,{loading:(null===y||void 0===y?void 0:y.isLoading)&&"confirmed"===(null===f||void 0===f?void 0:f.action),children:"Confirm"})});break;case"confirmed":const i=(0,k.I4)(null===g||void 0===g?void 0:g.date);e=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.A,{variant:"primary",className:i?"ms-2 mb-2":"ms-2",size:"sm",onClick:()=>C({open:!0,title:"Reschedule Booking",confirmButton:"Yes, Reschedule",children:"Are you sure want to reschedule this booking?",onConfirm:()=>C({open:!1,action:"reschedule"})}),children:(0,A.jsx)(x.A,{loading:(null===y||void 0===y?void 0:y.isLoading)&&"reschedule"===(null===f||void 0===f?void 0:f.action),children:"Reschedule"})}),i&&(0,A.jsx)(r.A,{variant:"primary",className:"ms-2 mb-2",size:"sm",onClick:()=>C({open:!0,title:"Completed Booking",confirmButton:"Yes, Completed",children:"Are you sure want to completed this booking?",onConfirm:()=>N("completed"),action:"completed"}),children:(0,A.jsx)(x.A,{loading:(null===y||void 0===y?void 0:y.isLoading)&&"completed"===(null===f||void 0===f?void 0:f.action),children:"Completed"})})]});break;case"canceled":e=(0,A.jsx)(r.A,{variant:"primary",className:"ms-2",size:"sm",onClick:()=>C({open:!0,title:"Resume Booking",body:"Are you sure want to resume this booking?",confirmButton:"Yes, Resume",onConfirm:()=>N("pending"),action:"pending"}),children:(0,A.jsx)(x.A,{loading:(null===y||void 0===y?void 0:y.isLoading)&&"pending"===(null===f||void 0===f?void 0:f.action),children:"Resume"})});break;default:e=null}return e||(0,A.jsx)(A.Fragment,{})};return(0,A.jsxs)(s.A,{className:"mb-3",style:{width:"100%"},children:["reschedule"===(null===f||void 0===f?void 0:f.action)?(0,A.jsx)(_,{booking:g}):(0,A.jsx)(j,(0,c.A)((0,c.A)({},f),{},{onClose:()=>C({open:!1}),children:null===f||void 0===f?void 0:f.children})),(0,A.jsx)(s.A.Body,{children:(0,A.jsxs)(v.A,{children:[(0,A.jsxs)(u.A,{xs:8,children:[(0,A.jsx)(s.A.Title,{className:"card-title",children:null===g||void 0===g?void 0:g.customer.display_name}),(0,A.jsxs)(s.A.Text,{className:"card-text",children:[g.date,","," ",(0,A.jsx)("span",{className:"text-capitalize",children:null===g||void 0===g||null===(i=g.slot)||void 0===i?void 0:i.day}),","," ",(0,k.fU)(null===g||void 0===g||null===(n=g.slot)||void 0===n?void 0:n.start_time)," -"," ",(0,k.fU)(null===g||void 0===g||null===(o=g.slot)||void 0===o?void 0:o.end_time)]}),(0,A.jsxs)(s.A.Text,{className:"card-text",children:[null===g||void 0===g||null===(d=g.service)||void 0===d?void 0:d.name," - (",h.T,null===g||void 0===g||null===(t=g.service)||void 0===t?void 0:t.price_amount,")",(0,A.jsx)("br",{}),"Payment: ",(0,A.jsx)(m.A,{children:null===g||void 0===g||null===(a=g.payment)||void 0===a?void 0:a.status})]})]}),(0,A.jsxs)(u.A,{xs:4,className:"text-right",children:[(0,A.jsx)(w,{}),["pending","confirmed"].includes(null===g||void 0===g?void 0:g.status)&&(0,A.jsx)(r.A,{variant:"danger",className:"ms-2",size:"sm",onClick:()=>{C({open:!0,type:"danger",title:"Cancel Booking",confirmButton:"Yes, Cancel",body:"Are you sure want to cancel this booking?",onConfirm:()=>{N("canceled")},action:"canceled"})},children:(0,A.jsx)(x.A,{loading:(null===y||void 0===y?void 0:y.isLoading)&&"canceled"===(null===f||void 0===f?void 0:f.action),children:"Cancel"})})]})]})})]})};var B=n(1685);const S=e=>{let{title:i}=e;return(0,A.jsx)(s.A,{className:"no-bookings-card",children:(0,A.jsxs)(s.A.Body,{className:"no-bookings-body",children:[(0,A.jsx)("div",{className:"no-bookings-icon",children:"\ud83d\udcc5"}),(0,A.jsxs)(s.A.Title,{className:"no-bookings-title",children:["No ",i," bookings"]}),(0,A.jsx)(s.A.Text,{className:"no-bookings-text",children:"all"===i?"You have no bookings yet. Start by creating your availability.":"You have no ".concat(i," bookings. As soon as someone books a time with you it will show up here.")})]})})},L=()=>{var e,i,n,s,c;const[r,v]=(0,l.useState)("all"),[u,m]=(0,l.useState)({all:[],upcoming:[],pending:[],completed:[],canceled:[]}),{data:h,isLoading:g,isFetching:x}=(0,b.aE)({});(0,l.useEffect)(()=>{if(h){const e=h.filter(e=>"confirmed"===(null===e||void 0===e?void 0:e.status)),i=h.filter(e=>"pending"===(null===e||void 0===e?void 0:e.status)),n=h.filter(e=>"completed"===(null===e||void 0===e?void 0:e.status)),l=h.filter(e=>"canceled"===(null===e||void 0===e?void 0:e.status));m({all:h,upcoming:e,pending:i,completed:n,canceled:l})}},[h]);const j=[{key:"all",label:"All",count:(null===u||void 0===u||null===(e=u.all)||void 0===e?void 0:e.length)||0,data:null===u||void 0===u?void 0:u.all},{key:"upcoming",label:"Upcoming",count:(null===u||void 0===u||null===(i=u.upcoming)||void 0===i?void 0:i.length)||0,data:null===u||void 0===u?void 0:u.upcoming},{key:"unconfirmed",label:"Unconfirmed",count:(null===u||void 0===u||null===(n=u.pending)||void 0===n?void 0:n.length)||0,data:null===u||void 0===u?void 0:u.pending},{key:"past",label:"Completed",count:(null===u||void 0===u||null===(s=u.completed)||void 0===s?void 0:s.length)||0,data:null===u||void 0===u?void 0:u.completed},{key:"canceled",label:"Canceled",count:(null===u||void 0===u||null===(c=u.canceled)||void 0===c?void 0:c.length)||0,data:null===u||void 0===u?void 0:u.canceled}];return(0,A.jsx)("div",{id:"booking",className:"bookings-container",children:(0,A.jsxs)(o.A,{fluid:!0,className:"bookings-wrapper",children:[(0,A.jsx)(a.N9,{}),(0,A.jsx)(B.A,{loading:g||x}),(0,A.jsx)("div",{className:"bookings-content",children:(0,A.jsxs)(d.A.Container,{id:"bookings-tabs",activeKey:r,onSelect:e=>v(e),children:[(0,A.jsx)("div",{className:"tabs-wrapper",children:(0,A.jsx)(t.A,{variant:"pills",className:"bookings-nav",children:j.map(e=>(0,A.jsx)(t.A.Item,{className:"nav-item-custom",children:(0,A.jsx)(t.A.Link,{eventKey:e.key,className:"nav-link-custom",children:(0,A.jsxs)("div",{className:"tab-content",children:[(0,A.jsx)("span",{className:"tab-label",children:e.label}),(0,A.jsx)("span",{className:"tab-count",children:e.count})]})})},e.key))})}),(0,A.jsx)("div",{className:"tab-content-wrapper",children:(0,A.jsx)(d.A.Content,{children:j.map(e=>(0,A.jsx)(d.A.Pane,{eventKey:e.key,children:(0,A.jsxs)("div",{className:"bookings-section",children:[(0,A.jsxs)("div",{className:"section-header",children:[(0,A.jsxs)("h3",{className:"section-title",children:[e.label," Bookings"]}),(0,A.jsxs)("span",{className:"section-count",children:[e.count," appointments"]})]}),(0,A.jsx)("div",{className:"bookings-grid",children:e.data&&e.data.length>0?e.data.map(e=>(0,A.jsx)("div",{className:"booking-item",children:(0,A.jsx)(w,{booking:e})},e.booking_id)):(0,A.jsx)(S,{title:e.label.toLowerCase()})})]})},e.key))})})]})})]})})}},1089:(e,i,n)=>{n.d(i,{I4:()=>d,Qj:()=>s,fU:()=>o,pP:()=>t});var l=n(9379);const o=e=>{if(!e)return"00:00";let[i,n]=null===e||void 0===e?void 0:e.split(":");const l=i<12?"AM":"PM";return i=i%12||12,"".concat(i.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0")," ").concat(l)},d=e=>{const i=new Date,n=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()));return(e=new Date(e)).toISOString()<n.toISOString()},t=e=>{const i=[],n=new Date(0,0,0,0,"start"===e?0:30,0),l=new Date(0,0,0,"start"===e?23:24,"start"===e?30:0,0);for(;n<=l;){const e=n.getHours()%12||12,l=n.getMinutes().toString().padStart(2,"0"),o=n.getHours()<12?"AM":"PM";i.push({value:"".concat(n.getHours(),":").concat(l),label:"".concat(e.toString().padStart(2,"0"),":").concat(l," ").concat(o)}),n.setMinutes(n.getMinutes()+30)}return i},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const i=[];for(const s of e){var n,d,t;if(i[null===s||void 0===s||null===(n=s.day)||void 0===n?void 0:n.toLowerCase()])i[null===s||void 0===s||null===(d=s.day)||void 0===d?void 0:d.toLowerCase()].timeSlots.push((0,l.A)((0,l.A)({},s),{},{start:{value:null===s||void 0===s?void 0:s.start_time,label:o(null===s||void 0===s?void 0:s.start_time)},end:{value:null===s||void 0===s?void 0:s.end_time,label:o(null===s||void 0===s?void 0:s.end_time)}}));else i[null===s||void 0===s||null===(t=s.day)||void 0===t?void 0:t.toLowerCase()]={enabled:!0,day:null===s||void 0===s?void 0:s.day,timeSlots:[(0,l.A)((0,l.A)({},s),{},{start:{value:null===s||void 0===s?void 0:s.start_time,label:o(null===s||void 0===s?void 0:s.start_time)},end:{value:null===s||void 0===s?void 0:s.end_time,label:o(null===s||void 0===s?void 0:s.end_time)}})]}}return i}},6867:(e,i,n)=>{n.d(i,{A:()=>t});var l=n(9379),o=n(4201),d=n(579);function t(e){return null!==e&&void 0!==e&&e.children?(0,d.jsxs)("div",{className:"d-flex flex-col justify-content-center align-items-center gap-1",children:[(0,d.jsx)(o.A,(0,l.A)({height:25,color:"#18A0FB"},e)),(0,d.jsx)("strong",{children:null===e||void 0===e?void 0:e.children})]}):(0,d.jsx)(o.A,(0,l.A)({height:25,color:"#18A0FB"},e))}}}]);
//# sourceMappingURL=299.9fb64f67.chunk.js.map